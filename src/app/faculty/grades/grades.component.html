<div class="container">
  <div class="row">
      <!--Start Left Panel-->
      <div class="col-lg-3 col-md-3 col-sm-6 col-xs-12 profile-info">
          <app-sidenavigation></app-sidenavigation>
      </div>
      <div class="col-lg-9">
       
        <ul class="nav nav-tabs nav-fill">
          
          <li class="nav-item">
            <a href="#currentDate" data-toggle="tab" class="nav-link active  ">Grader Report </a>
          </li>
          <li class="nav-item">
            <a href="#from" data-toggle="tab" class="nav-link"> User Report</a>
          </li>
        
        </ul>
        <div class="tab-content">
          <div id="currentDate" class="tab-pane fade show active">
            <span class="mx-2 my-5 h6">Grade category</span><select class="form-select form-select-lg mx-2 my-5" aria-label=".form-select-lg example" [(ngModel)]="selectCourse" (ngModelChange)="changeItems()">
              
              <option *ngFor="let course of courses" value="{{course.id}}" selected >{{course.fullname}}</option>
            </select>
            <span class="mx-2 my-5 h6">Grade Item</span><select class="form-select form-select-lg mx-2 my-5" aria-label=".form-select-lg example" [(ngModel)]="selectItem">
              
              <option  *ngFor="let item of gradeItem" value="{{item.gradeItemId}}" >{{item.itemName}}</option>
              <option value="0">All</option>
            </select>
            <button class="btn btn-primary btn-sm px-2 mx-3 my-5" (click)="getGraderReport()">submit</button>
            <table *ngIf="!showAll" class="table table-striped table-bordered table-hover " id="graderTable1">
              <thead class="">
                <tr class="bg-light">
                  <th scope="col">Student Name</th>
                  <th scope="col">Course</th>
                  <th scope="col">Grade Item</th>
                  <th scope="col">Grade</th>
                  <th scope="col">Range</th>
                  <th scope="col">Percentage</th>
                </tr>
              </thead>
              <tbody>
                <tr *ngFor="let report of graderReport">
                  <th scope="row">{{report[0].firstName}} {{report[0].lastName}}</th>
                  <td>{{report[0].courseName}}</td>
                  <td>{{report[0].gradeItemName}}</td>
                  <td>{{report[0].gradeObtained}}</td>
                  <td>0-{{report[0].gradeTotal}}</td>
                  <td>{{report[0].percentage | number}}</td>
                </tr>
                
               
              </tbody>
            </table>
            <button (click)="getCSV('graderTable1')"  *ngIf="!showAll"  class="btn btn-success">Export as csv</button>
            <table *ngIf="showAll" class="table table-striped table-bordered table-hover " id="graderTable2">
              <thead class="">
                <tr class="bg-light">
                  <th scope="col">Student Name</th>
                  <th scope="col">Course</th>
                  <th scope="col" *ngFor="let item of graderReportGradeItems">{{item.gradeItemName}} 
                  </th>
                </tr>
              </thead>
              <tbody>
                <tr *ngFor="let report of graderReport">
                  <th scope="col">{{report[0].firstName}} {{report[0].lastName}}</th>
                  <td>{{report[0].courseName}}</td>
                  <td *ngFor="let grade of report">{{grade.gradeObtained}}</td>
                </tr>
                
               
              </tbody>
            </table>
            <button  *ngIf="showAll" (click)="getCSV('graderTable2')"  class="btn btn-success">Export as csv</button>
          </div>
          <div id="from" class="tab-pane fade">
            <span class="mx-2 my-5 h6">Grade category</span><select class="form-select form-select-lg mx-2 my-5" aria-label=".form-select-lg example" [(ngModel)]="selectCourse" (ngModelChange)="changeStudents()">
              <option *ngFor="let course of courses" value="{{course.id}}"  >{{course.fullname}}</option>
              
            </select>
            <span class="mx-2 my-5 h6">Student Name</span><select class="form-select form-select-lg mx-2 my-5" aria-label=".form-select-lg example" [(ngModel)]="selectStudent" >
              <option *ngFor="let student of students" value="{{student.id}}"  >{{student.firstname }} {{student.lastname}} </option>
              <option value="0"> All</option>
               
            </select>
            
            <button class="btn btn-primary btn-sm px-2 mx-3 my-5" (click)="getUserReport()" >submit</button>
              <!-- <h1 class="bg-secondary"> {{student.firstname }} {{student.lastname}}</h1> -->
            <table class="table table-striped table-bordered table-hover " *ngFor="let report of userReport"  id="userTable" >
              
              <thead class="">
                <div class="caption text-center text-light bg-info"><b> <h5>Report: {{report[0].firstName}} {{report[0].lastName}}</h5></b></div>
                <tr class="bg-light">
                  <th scope="col">Student Name</th>
                  <th scope="col">Course</th>
                  <th scope="col">Grade Item</th>
                  <th scope="col">Grade</th>
                  <th scope="col">Range</th>
                  <th scope="col">Percentage</th>
                  
                </tr>
              </thead>
              <tbody>
                <tr *ngFor="let rep of report">
                  <th scope="row">{{rep.firstName}} {{rep.lastName}}</th>
                  <td>{{rep.courseName}}</td>
                  <td>{{rep.gradeItemName}}</td>
                  <td>{{rep.gradeObtained}}</td>
                  <td>0-{{rep.gradeTotal}}</td>
                  <td>{{rep.percentage | number}}</td>
                </tr>
                
                
              </tbody>
            </table>
            <button (click)="getCSV('userTable')"  class="btn btn-success">Export as csv</button>
            <br>
            <br>
          </div>
        </div>
        
       </div>
</div>
</div>